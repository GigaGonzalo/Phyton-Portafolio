ğŸ Â¡JSON PYTHON-O-MATIC! ğŸ

Â¡LLEGÃ“ LA REVOLUCIÃ“N EN INTERCAMBIO DE DATOS UNIVERSAL!
ğŸ¯ Â¡JSON EN PYTHON - PODER DE DATOS PORTÃBLES!
python

# âš¡ Â¡BIENVENIDO AL MUNDO DE JSON! âš¡
import json

print("ğŸŠ Â¡JSON PYTHON - COMUNICA DATOS COMO NUNCA! ğŸŠ")
print("Â¿Cansado de formatos complicados? Â¿Necesitas intercambiar datos entre sistemas?")
print("Â¡JSON lo simplifica TODO! ğŸ’«")

ğŸš€ Â¡JSON BÃSICO - TU PRIMER INTERCAMBIO!
âœ¨ QUÃ‰ ES JSON - Â¡EL LENGUAJE UNIVERSAL!


# Â¡JSON ES EL IDIOMA UNIVERSAL DE LOS DATOS!
"""
JSON (JavaScript Object Notation) es:
âœ… Formato de texto ligero
âœ… FÃ¡cil de leer y escribir
âœ… Independiente del lenguaje
âœ… Perfecto para APIs y configuraciones
"""

# Â¡EJEMPLO DE JSON - DATOS ESTRUCTURADOS!
ejemplo_json = """
{
    "usuario": {
        "nombre": "Ana GarcÃ­a",
        "edad": 28,
        "es_estudiante": true,
        "hobbies": ["programar", "leer", "viajar"],
        "direccion": {
            "calle": "Calle Python 123",
            "ciudad": "Madrid",
            "codigo_postal": "28001"
        }
    },
    "configuracion": {
        "tema": "oscuro",
        "notificaciones": true,
        "idioma": "es"
    }
}
"""

print("ğŸ“‹ Â¡ESTRUCTURA JSON TÃPICA! ğŸ“‹")
print("ğŸ”¹ Objetos: { } - Como diccionarios en Python")
print("ğŸ”¹ Arrays: [ ] - Como listas en Python") 
print("ğŸ”¹ Strings: \"texto\" - Como strings en Python")
print("ğŸ”¹ NÃºmeros: 123 - Como int/float en Python")
print("ğŸ”¹ Booleanos: true/false - Como True/False en Python")
print("ğŸ”¹ Null: null - Como None en Python")

ğŸ”„ CONVERSIÃ“N BÃSICA - Â¡PYTHON â†” JSON!


import json

# Â¡DATOS EN PYTHON - LISTOS PARA CONVERTIR!
datos_python = {
    "nombre": "Carlos LÃ³pez",
    "edad": 32,
    "activo": True,
    "salario": 45000.50,
    "hijos": None,
    "habilidades": ["Python", "JavaScript", "SQL"],
    "contacto": {
        "email": "carlos@python.com",
        "telefono": "+34 600 123 456"
    }
}

print("ğŸ”„ Â¡CONVERSIÃ“N PYTHON â†’ JSON! ğŸ”„")

# CONVERTIR PYTHON A JSON (SERIALIZACIÃ“N)
json_string = json.dumps(datos_python, indent=2, ensure_ascii=False)
print("ğŸ“¤ Python a JSON (string):")
print(json_string)

# CONVERTIR JSON A PYTHON (DESERIALIZACIÃ“N)
python_objeto = json.loads(json_string)
print(f"\nğŸ“¥ JSON a Python:")
print(f"   Tipo: {type(python_objeto)}")
print(f"   Nombre: {python_objeto['nombre']}")
print(f"   Edad: {python_objeto['edad']}")

# Â¡VERIFICACIÃ“N DE EQUIVALENCIA!
print(f"\nâœ… Â¿Son equivalentes? {datos_python == python_objeto}")

ğŸª Â¡SERIALIZACIÃ“N AVANZADA - CONFIGURACIÃ“N PROFESIONAL!
âš¡ JSON.DUMPS() - PERSONALIZA TU SALIDA!


# Â¡DATOS COMPLEJOS PARA SERIALIZAR!
datos_complejos = {
    "empresa": "Tech Solutions",
    "fundacion": 2010,
    "empleados": [
        {
            "id": 1,
            "nombre": "Ana Ruiz",
            "departamento": "Desarrollo",
            "salario": 55000,
            "activo": True,
            "habilidades": {"Python", "Django", "PostgreSQL"}
        },
        {
            "id": 2, 
            "nombre": "Pedro MartÃ­nez",
            "departamento": "DiseÃ±o",
            "salario": 48000,
            "activo": False,
            "habilidades": {"Figma", "Photoshop", "Illustrator"}
        }
    ],
    "proyectos_activos": 15,
    "presupuesto_anual": 2500000.75
}

print("ğŸ¨ Â¡SERIALIZACIÃ“N AVANZADA CON OPCIONES! ğŸ¨")

# SERIALIZACIÃ“N BÃSICA
json_basico = json.dumps(datos_complejos)
print("ğŸ“¤ SerializaciÃ³n bÃ¡sica:")
print(f"   Longitud: {len(json_basico)} caracteres")
print(f"   Primeros 100 chars: {json_basico[:100]}...")

# SERIALIZACIÃ“N CON FORMATO BONITO
json_formateado = json.dumps(
    datos_complejos,
    indent=4,               # ğŸ“ Sangrado para legibilidad
    ensure_ascii=False,     # ğŸ”¤ Permite caracteres no-ASCII
    sort_keys=True          # ğŸ”  Ordena las claves alfabÃ©ticamente
)
print(f"\nğŸ“ SerializaciÃ³n formateada:")
print(json_formateado[:200] + "...")

# SERIALIZACIÃ“N CON SEPARADORES PERSONALIZADOS
json_compacto = json.dumps(
    datos_complejos,
    separators=(',', ':'),  # ğŸ¯ Sin espacios, mÃ¡s compacto
    sort_keys=True
)
print(f"\nğŸ“¦ SerializaciÃ³n compacta:")
print(f"   Longitud: {len(json_compacto)} caracteres")
print(f"   Primeros 100 chars: {json_compacto[:100]}...")

# Â¡MANEJO DE TIPOS ESPECIALES!
print(f"\nâš ï¸ Problemas con tipos no serializables:")
datos_problematicos = {
    "fecha_actual": "2024-01-15",  # datetime no es serializable por defecto
    "conjunto": {1, 2, 3},         # set no es serializable
    "decimal": 3.14159
}

try:
    json_problematico = json.dumps(datos_problematicos)
except TypeError as e:
    print(f"   âŒ Error: {e}")

ğŸ¯ MANEJO DE TIPOS ESPECIALES - Â¡SERIALIZACIÃ“N PERSONALIZADA!


import json
from datetime import datetime, date
from decimal import Decimal

# Â¡CLASE PERSONALIZADA PARA DEMOSTRAR SERIALIZACIÃ“N!
class Producto:
    def __init__(self, id, nombre, precio, fecha_creacion):
        self.id = id
        self.nombre = nombre
        self.precio = precio
        self.fecha_creacion = fecha_creacion
        self.en_stock = True
    
    def __repr__(self):
        return f"Producto({self.id}, '{self.nombre}', ${self.precio})"

# Â¡FUNCIÃ“N PERSONALIZADA PARA SERIALIZACIÃ“N!
def serializador_personalizado(obj):
    """Convierte objetos Python personalizados a JSON serializable"""
    
    if isinstance(obj, (datetime, date)):
        return obj.isoformat()  # ğŸ“… Convertir fechas a string ISO
    
    elif isinstance(obj, Decimal):
        return float(obj)  # ğŸ’° Convertir Decimal a float
    
    elif isinstance(obj, set):
        return list(obj)  # ğŸ­ Convertir set a lista
    
    elif isinstance(obj, Producto):
        # ğŸ·ï¸ Convertir objeto Producto a diccionario
        return {
            "id": obj.id,
            "nombre": obj.nombre,
            "precio": float(obj.precio),
            "fecha_creacion": obj.fecha_creacion.isoformat(),
            "en_stock": obj.en_stock,
            "_tipo": "Producto"  # ğŸ” Marcar tipo para deserializaciÃ³n
        }
    
    elif hasattr(obj, '__dict__'):
        # ğŸ”§ Convertir cualquier objeto con __dict__
        return obj.__dict__
    
    else:
        raise TypeError(f"Objeto {obj} no es serializable")

print("ğŸ¯ Â¡SERIALIZACIÃ“N DE TIPOS ESPECIALES! ğŸ¯")

# Datos con tipos complejos
datos_especiales = {
    "producto": Producto(101, "Laptop Gaming", Decimal("1299.99"), datetime(2024, 1, 15)),
    "fecha_actual": datetime.now(),
    "tags": {"gaming", "tecnologia", "portatil"},
    "precio_decimal": Decimal("99.50"),
    "cantidad": 50
}

# Serializar con el serializador personalizado
json_especial = json.dumps(
    datos_especiales,
    default=serializador_personalizado,
    indent=2,
    ensure_ascii=False
)

print("ğŸ“¤ Datos especiales serializados:")
print(json_especial)

# Â¡DESERIALIZACIÃ“N PERSONALIZADA!
def deserializador_personalizado(dct):
    """Reconvierte objetos personalizados desde JSON"""
    if "_tipo" in dct and dct["_tipo"] == "Producto":
        # ğŸ·ï¸ Reconstruir objeto Producto
        return Producto(
            id=dct["id"],
            nombre=dct["nombre"],
            precio=Decimal(str(dct["precio"])),
            fecha_creacion=datetime.fromisoformat(dct["fecha_creacion"])
        )
    return dct

# Probar round-trip (serializar â†’ deserializar)
datos_recuperados = json.loads(json_especial, object_hook=deserializador_personalizado)
print(f"\nğŸ“¥ Producto recuperado: {datos_recuperados['producto']}")
print(f"ğŸ“… Fecha recuperada: {datos_recuperados['fecha_actual']}")

ğŸ’¾ Â¡TRABAJO CON ARCHIVOS JSON - PERSISTENCIA DE DATOS!
ğŸ“ LECTURA Y ESCRITURA DE ARCHIVOS JSON


import json
import os

print("ğŸ’¾ Â¡TRABAJANDO CON ARCHIVOS JSON! ğŸ’¾")

# DATOS PARA GUARDAR
datos_usuarios = {
    "usuarios": [
        {
            "id": 1,
            "username": "ana_dev",
            "email": "ana@python.com",
            "preferencias": {
                "tema": "oscuro",
                "idioma": "es",
                "notificaciones": True
            },
            "fecha_registro": "2024-01-10T10:30:00"
        },
        {
            "id": 2,
            "username": "carlos_data",
            "email": "carlos@python.com", 
            "preferencias": {
                "tema": "claro",
                "idioma": "en",
                "notificaciones": False
            },
            "fecha_registro": "2024-01-12T14:45:00"
        }
    ],
    "total_usuarios": 2,
    "ultima_actualizacion": "2024-01-15T09:00:00"
}

# Â¡ESCRIBIR A ARCHIVO JSON!
nombre_archivo = "usuarios.json"

try:
    with open(nombre_archivo, 'w', encoding='utf-8') as archivo:
        json.dump(
            datos_usuarios, 
            archivo, 
            indent=2, 
            ensure_ascii=False,
            sort_keys=True
        )
    print(f"âœ… Datos guardados en '{nombre_archivo}'")
    
except IOError as e:
    print(f"âŒ Error al guardar archivo: {e}")

# Â¡LEER DESDE ARCHIVO JSON!
try:
    with open(nombre_archivo, 'r', encoding='utf-8') as archivo:
        datos_cargados = json.load(archivo)
    
    print(f"\nğŸ“¥ Datos cargados desde '{nombre_archivo}':")
    print(f"   Total usuarios: {datos_cargados['total_usuarios']}")
    
    for usuario in datos_cargados['usuarios']:
        print(f"   ğŸ‘¤ {usuario['username']} - {usuario['email']}")
    
    # VERIFICAR INTEGRIDAD
    print(f"\nğŸ” Â¿Datos idÃ©nticos? {datos_usuarios == datos_cargados}")
    
except (IOError, json.JSONDecodeError) as e:
    print(f"âŒ Error al cargar archivo: {e}")

# Â¡ACTUALIZACIÃ“N DE ARCHIVO JSON!
def agregar_usuario(archivo_json, nuevo_usuario):
    """Agrega un nuevo usuario al archivo JSON"""
    try:
        # Cargar datos existentes
        with open(archivo_json, 'r', encoding='utf-8') as archivo:
            datos = json.load(archivo)
        
        # Agregar nuevo usuario
        nuevo_usuario['id'] = len(datos['usuarios']) + 1
        datos['usuarios'].append(nuevo_usuario)
        datos['total_usuarios'] = len(datos['usuarios'])
        datos['ultima_actualizacion'] = datetime.now().isoformat()
        
        # Guardar datos actualizados
        with open(archivo_json, 'w', encoding='utf-8') as archivo:
            json.dump(datos, archivo, indent=2, ensure_ascii=False)
        
        print(f"âœ… Usuario '{nuevo_usuario['username']}' agregado exitosamente")
        return True
        
    except Exception as e:
        print(f"âŒ Error al agregar usuario: {e}")
        return False

# Agregar un nuevo usuario
nuevo_usuario = {
    "username": "maria_ai",
    "email": "maria@python.com",
    "preferencias": {
        "tema": "auto",
        "idioma": "es", 
        "notificaciones": True
    }
}

agregar_usuario(nombre_archivo, nuevo_usuario)

# Limpieza (opcional)
if os.path.exists(nombre_archivo):
    os.remove(nombre_archivo)
    print(f"\nğŸ§¹ Archivo '{nombre_archivo}' eliminado")

ğŸŒ Â¡JSON Y APIS - COMUNICACIÃ“N WEB!
ğŸ”— TRABAJANDO CON APIs REST


import json
import requests  # Â¡NecesitarÃ¡s: pip install requests

print("ğŸŒ Â¡JSON Y APIS WEB! ğŸŒ")

# Â¡SIMULACIÃ“N DE API REST (sin dependencias externas)!
class APISimulada:
    """Simula una API REST para demostrar JSON"""
    
    def __init__(self):
        self.datos = {
            "posts": [
                {
                    "id": 1,
                    "titulo": "IntroducciÃ³n a Python",
                    "autor": "Ana GarcÃ­a",
                    "fecha": "2024-01-10",
                    "contenido": "Python es un lenguaje poderoso...",
                    "tags": ["python", "programacion", "tutorial"],
                    "likes": 45
                },
                {
                    "id": 2,
                    "titulo": "JSON para Principiantes", 
                    "autor": "Carlos LÃ³pez",
                    "fecha": "2024-01-12",
                    "contenido": "JSON es el formato universal...",
                    "tags": ["json", "datos", "api"],
                    "likes": 32
                }
            ]
        }
    
    def obtener_posts(self):
        """GET /posts - Obtener todos los posts"""
        return {
            "status": "success",
            "data": self.datos["posts"],
            "total": len(self.datos["posts"]),
            "timestamp": "2024-01-15T10:00:00Z"
        }
    
    def crear_post(self, nuevo_post):
        """POST /posts - Crear nuevo post"""
        nuevo_post["id"] = len(self.datos["posts"]) + 1
        self.datos["posts"].append(nuevo_post)
        
        return {
            "status": "success", 
            "message": "Post creado exitosamente",
            "data": nuevo_post
        }
    
    def buscar_posts(self, tag):
        """GET /posts?tag=python - Buscar posts por tag"""
        posts_filtrados = [
            post for post in self.datos["posts"] 
            if tag in post["tags"]
        ]
        
        return {
            "status": "success",
            "data": posts_filtrados,
            "filtro": tag,
            "encontrados": len(posts_filtrados)
        }

# Â¡USO DE LA API SIMULADA!
api = APISimulada()

print("ğŸ”¹ OBTENER TODOS LOS POSTS:")
respuesta_posts = api.obtener_posts()
print(json.dumps(respuesta_posts, indent=2, ensure_ascii=False))

print(f"\nğŸ“Š EstadÃ­sticas:")
print(f"   Total posts: {respuesta_posts['total']}")
print(f"   Primer post: {respuesta_posts['data'][0]['titulo']}")

print("\nğŸ”¹ CREAR NUEVO POST:")
nuevo_post = {
    "titulo": "APIs REST con Python",
    "autor": "MarÃ­a RodrÃ­guez", 
    "fecha": "2024-01-15",
    "contenido": "Las APIs REST son esenciales...",
    "tags": ["api", "rest", "python", "web"],
    "likes": 0
}

respuesta_crear = api.crear_post(nuevo_post)
print(json.dumps(respuesta_crear, indent=2, ensure_ascii=False))

print("\nğŸ”¹ BUSCAR POSTS POR TAG:")
respuesta_busqueda = api.buscar_posts("python")
print(f"   Posts con tag 'python': {respuesta_busqueda['encontrados']}")
for post in respuesta_busqueda['data']:
    print(f"   - {post['titulo']} (Likes: {post['likes']})")

# Â¡MANEJO DE ERRORES EN APIs!
print("\nğŸš¨ MANEJO DE ERRORES EN APIs:")
respuesta_error = {
    "status": "error",
    "message": "Recurso no encontrado",
    "code": 404,
    "timestamp": "2024-01-15T10:05:00Z"
}

print("âŒ Respuesta de error tÃ­pica:")
print(json.dumps(respuesta_error, indent=2))

ğŸ¨ Â¡VALIDACIÃ“N Y ESQUEMAS JSON - DATOS CONFIABLES!
ğŸ›¡ï¸ VALIDACIÃ“N DE ESTRUCTURA JSON


import json

print("ğŸ›¡ï¸ Â¡VALIDACIÃ“N DE JSON! ğŸ›¡ï¸")

# ESQUEMA PARA VALIDACIÃ“N
ESQUEMA_USUARIO = {
    "type": "object",
    "required": ["nombre", "email", "edad"],
    "properties": {
        "nombre": {"type": "string", "minLength": 2},
        "email": {"type": "string", "format": "email"},
        "edad": {"type": "integer", "minimum": 18, "maximum": 120},
        "activo": {"type": "boolean"},
        "habilidades": {
            "type": "array", 
            "items": {"type": "string"}
        }
    }
}

def validar_usuario_simple(datos):
    """Valida datos de usuario de forma simple"""
    errores = []
    
    # Validar campos requeridos
    for campo in ["nombre", "email", "edad"]:
        if campo not in datos:
            errores.append(f"âŒ Campo requerido faltante: {campo}")
    
    # Validar tipos
    if "nombre" in datos and not isinstance(datos["nombre"], str):
        errores.append("âŒ 'nombre' debe ser string")
    
    if "edad" in datos and not isinstance(datos["edad"], int):
        errores.append("âŒ 'edad' debe ser integer")
    
    if "email" in datos and "@" not in datos["email"]:
        errores.append("âŒ 'email' debe ser vÃ¡lido")
    
    if "edad" in datos and isinstance(datos["edad"], int):
        if datos["edad"] < 18:
            errores.append("âŒ 'edad' debe ser >= 18")
        if datos["edad"] > 120:
            errores.append("âŒ 'edad' debe ser <= 120")
    
    return errores

print("ğŸ” VALIDACIÃ“N MANUAL DE DATOS:")

# Datos de prueba
usuarios_prueba = [
    {
        "nombre": "Ana",
        "email": "ana@python.com",
        "edad": 25,
        "activo": True,
        "habilidades": ["Python", "SQL"]
    },
    {
        "nombre": "L",  # Nombre muy corto
        "email": "email_invalido",
        "edad": 15,     # Edad muy baja
        "habilidades": "no es array"  # Tipo incorrecto
    },
    {
        "email": "carlos@python.com",  # Falta nombre
        "edad": 30
    }
]

for i, usuario in enumerate(usuarios_prueba, 1):
    print(f"\nğŸ‘¤ Usuario {i}:")
    errores = validar_usuario_simple(usuario)
    
    if not errores:
        print("   âœ… Datos vÃ¡lidos!")
        print(f"   ğŸ“Š {usuario['nombre']} - {usuario['email']}")
    else:
        print("   âŒ Errores encontrados:")
        for error in errores:
            print(f"      {error}")

# Â¡VALIDACIÃ“N CON JSONSCHEMA (OPCIONAL)!
print("\nğŸ¯ VALIDACIÃ“N CON JSONSCHEMA (conceptual):")
"""
Para validaciÃ³n avanzada, puedes usar la biblioteca jsonschema:

pip install jsonschema

from jsonschema import validate, ValidationError

try:
    validate(instance=datos_usuario, schema=ESQUEMA_USUARIO)
    print("âœ… JSON vÃ¡lido segÃºn esquema!")
except ValidationError as e:
    print(f"âŒ Error de validaciÃ³n: {e.message}")
"""

ğŸ† Â¡SISTEMA COMPLETO DEL MUNDO REAL!
ğŸ›’ SISTEMA DE INVENTARIO CON JSON


import json
import os
from datetime import datetime
from typing import Dict, List, Optional

class SistemaInventarioJSON:
    """Sistema completo de inventario usando JSON para persistencia"""
    
    def __init__(self, archivo_json: str = "inventario.json"):
        self.archivo_json = archivo_json
        self.inventario = self._cargar_inventario()
    
    def _cargar_inventario(self) -> Dict:
        """Carga el inventario desde archivo JSON o crea uno nuevo"""
        if os.path.exists(self.archivo_json):
            try:
                with open(self.archivo_json, 'r', encoding='utf-8') as archivo:
                    datos = json.load(archivo)
                print(f"âœ… Inventario cargado desde '{self.archivo_json}'")
                return datos
            except (json.JSONDecodeError, IOError) as e:
                print(f"âŒ Error al cargar inventario: {e}. Creando nuevo...")
        
        # Inventario por defecto
        return {
            "productos": [],
            "categorias": ["electrÃ³nica", "hogar", "oficina", "deportes"],
            "ultima_actualizacion": datetime.now().isoformat(),
            "total_productos": 0,
            "valor_total_inventario": 0.0
        }
    
    def _guardar_inventario(self):
        """Guarda el inventario en archivo JSON"""
        try:
            with open(self.archivo_json, 'w', encoding='utf-8') as archivo:
                json.dump(
                    self.inventario,
                    archivo,
                    indent=2,
                    ensure_ascii=False,
                    sort_keys=True
                )
            print(f"ğŸ’¾ Inventario guardado en '{self.archivo_json}'")
        except IOError as e:
            print(f"âŒ Error al guardar inventario: {e}")
    
    def agregar_producto(self, nombre: str, precio: float, cantidad: int, categoria: str, proveedor: str = ""):
        """Agrega un nuevo producto al inventario"""
        
        # Validaciones
        if precio <= 0:
            print("âŒ El precio debe ser positivo")
            return False
        
        if cantidad < 0:
            print("âŒ La cantidad no puede ser negativa")
            return False
        
        if categoria not in self.inventario["categorias"]:
            print(f"âŒ CategorÃ­a '{categoria}' no vÃ¡lida. CategorÃ­as disponibles: {self.inventario['categorias']}")
            return False
        
        # Crear producto
        nuevo_producto = {
            "id": len(self.inventario["productos"]) + 1,
            "nombre": nombre,
            "precio": precio,
            "cantidad": cantidad,
            "categoria": categoria,
            "proveedor": proveedor,
            "fecha_agregado": datetime.now().isoformat(),
            "activo": True
        }
        
        # Agregar al inventario
        self.inventario["productos"].append(nuevo_producto)
        self.inventario["total_productos"] = len(self.inventario["productos"])
        self.inventario["valor_total_inventario"] = self._calcular_valor_total()
        self.inventario["ultima_actualizacion"] = datetime.now().isoformat()
        
        # Guardar cambios
        self._guardar_inventario()
        
        print(f"âœ… Producto '{nombre}' agregado exitosamente (ID: {nuevo_producto['id']})")
        return True
    
    def buscar_producto(self, criterio: str, valor: str):
        """Busca productos por diferentes criterios"""
        resultados = []
        
        for producto in self.inventario["productos"]:
            if criterio == "nombre" and valor.lower() in producto["nombre"].lower():
                resultados.append(producto)
            elif criterio == "categoria" and producto["categoria"] == valor:
                resultados.append(producto)
            elif criterio == "id" and producto["id"] == int(valor):
                resultados.append(producto)
        
        return resultados
    
    def actualizar_stock(self, producto_id: int, nueva_cantidad: int):
        """Actualiza el stock de un producto"""
        for producto in self.inventario["productos"]:
            if producto["id"] == producto_id:
                if nueva_cantidad >= 0:
                    producto["cantidad"] = nueva_cantidad
                    producto["ultima_actualizacion"] = datetime.now().isoformat()
                    self.inventario["valor_total_inventario"] = self._calcular_valor_total()
                    self.inventario["ultima_actualizacion"] = datetime.now().isoformat()
                    self._guardar_inventario()
                    print(f"âœ… Stock de '{producto['nombre']}' actualizado a {nueva_cantidad}")
                    return True
                else:
                    print("âŒ La cantidad no puede ser negativa")
                    return False
        
        print(f"âŒ Producto con ID {producto_id} no encontrado")
        return False
    
    def generar_reporte(self):
        """Genera un reporte completo del inventario"""
        print("\nğŸ“Š REPORTE DE INVENTARIO:")
        print(f"   Total productos: {self.inventario['total_productos']}")
        print(f"   Valor total: ${self.inventario['valor_total_inventario']:.2f}")
        print(f"   Ãšltima actualizaciÃ³n: {self.inventario['ultima_actualizacion']}")
        
        # Productos por categorÃ­a
        print("\nğŸ“¦ PRODUCTOS POR CATEGORÃA:")
        for categoria in self.inventario["categorias"]:
            productos_categoria = self.buscar_producto("categoria", categoria)
            if productos_categoria:
                print(f"   {categoria.title()}: {len(productos_categoria)} productos")
        
        # Productos con stock bajo
        print("\nâš ï¸  PRODUCTOS CON STOCK BAJO:")
        stock_bajo = [p for p in self.inventario["productos"] if p["cantidad"] < 5 and p["cantidad"] > 0]
        for producto in stock_bajo:
            print(f"   {producto['nombre']}: {producto['cantidad']} unidades")
        
        # Productos agotados
        print("\nâŒ PRODUCTOS AGOTADOS:")
        agotados = [p for p in self.inventario["productos"] if p["cantidad"] == 0]
        for producto in agotados:
            print(f"   {producto['nombre']} (ID: {producto['id']})")
    
    def _calcular_valor_total(self) -> float:
        """Calcula el valor total del inventario"""
        total = 0.0
        for producto in self.inventario["productos"]:
            total += producto["precio"] * producto["cantidad"]
        return total
    
    def exportar_backup(self, archivo_backup: str = None):
        """Crea una copia de seguridad del inventario"""
        if not archivo_backup:
            timestamp = datetime.now().strftime("%Y%m%d_%H%M%S")
            archivo_backup = f"inventario_backup_{timestamp}.json"
        
        try:
            with open(archivo_backup, 'w', encoding='utf-8') as archivo:
                json.dump(self.inventario, archivo, indent=2, ensure_ascii=False)
            print(f"ğŸ’¾ Copia de seguridad creada: '{archivo_backup}'")
            return True
        except IOError as e:
            print(f"âŒ Error al crear backup: {e}")
            return False

# Â¡DEMOSTRACIÃ“N DEL SISTEMA!
print("ğŸª Â¡SISTEMA DE INVENTARIO CON JSON! ğŸª")

# Crear sistema
inventario = SistemaInventarioJSON()

# Agregar productos
print("\nğŸ“¥ AGREGANDO PRODUCTOS:")
inventario.agregar_producto("Laptop Gaming", 1299.99, 10, "electrÃ³nica", "TechCorp")
inventario.agregar_producto("Mouse InalÃ¡mbrico", 25.50, 50, "electrÃ³nica", "Peripherals Inc")
inventario.agregar_producto("Silla Oficina", 199.99, 5, "oficina", "ComfortWorks")
inventario.agregar_producto("BalÃ³n FÃºtbol", 29.99, 2, "deportes", "SportsPro")

# Buscar productos
print("\nğŸ” BUSCANDO PRODUCTOS:")
resultados = inventario.buscar_producto("categoria", "electrÃ³nica")
print(f"   Productos en electrÃ³nica: {len(resultados)}")
for producto in resultados:
    print(f"   - {producto['nombre']} (${producto['precio']})")

# Actualizar stock
print("\nğŸ”„ ACTUALIZANDO STOCK:")
inventario.actualizar_stock(4, 0)  # Agotar balÃ³n de fÃºtbol

# Generar reporte
inventario.generar_reporte()

# Crear backup
inventario.exportar_backup()

# Limpieza
for archivo in ["inventario.json", "inventario_backup_*.json"]:
    for f in [f for f in os.listdir('.') if f.startswith('inventario')]:
        try:
            os.remove(f)
            print(f"ğŸ§¹ Archivo '{f}' eliminado")
        except:
            pass

ğŸŠ Â¡RESUMEN FINAL DE JSON!

Â¿QUÃ‰ OBTIENES CON JSON EN PYTHON?

    âœ… Interoperabilidad - Comunica entre sistemas diferentes

    âœ… Simplicidad - Formato fÃ¡cil de leer y escribir

    âœ… EstandarizaciÃ³n - Formato universalmente aceptado

    âœ… Eficiencia - Texto ligero y rÃ¡pido de procesar

    âœ… Flexibilidad - Estructuras de datos complejas

Â¡FUNCIONES PRINCIPALES!

    ğŸ“¤ json.dumps() - Python â†’ JSON string

    ğŸ“¥ json.loads() - JSON string â†’ Python

    ğŸ’¾ json.dump() - Python â†’ JSON file

    ğŸ“ json.load() - JSON file â†’ Python

Â¡CONVERSIONES AUTOMÃTICAS!

    ğŸ dict â†” ğŸ¯ JSON object

    ğŸ list â†” ğŸ¯ JSON array

    ğŸ str â†” ğŸ¯ JSON string

    ğŸ int/float â†” ğŸ¯ JSON number

    ğŸ True/False â†” ğŸ¯ JSON true/false

    ğŸ None â†” ğŸ¯ JSON null

Â¡NO ESPERES MÃS! â°
Â¡DOMINA JSON Y CONQUISTA EL INTERCAMBIO DE DATOS!


import json

def demostrar_poder_json():
    """Â¡FunciÃ³n final que demuestra todo tu poder con JSON!"""
    
    # Datos complejos
    datos_maestro = {
        "nombre": "Experto JSON",
        "habilidades": [
            "SerializaciÃ³n Python â†’ JSON",
            "DeserializaciÃ³n JSON â†’ Python", 
            "Trabajo con archivos JSON",
            "APIs y comunicaciÃ³n web",
            "ValidaciÃ³n y esquemas",
            "Manejo de tipos especiales"
        ],
        "estadisticas": {
            "proyectos_completados": 15,
            "datos_procesados": "2.5 GB",
            "eficiencia": 99.9
        },
        "certificaciones": ["JSON Pro", "Python Master", "API Specialist"],
        "fecha_maestria": "2024-01-15"
    }
    
    # SerializaciÃ³n avanzada
    json_perfecto = json.dumps(
        datos_maestro,
        indent=2,
        ensure_ascii=False,
        sort_keys=True
    )
    
    print("ğŸ‰ Â¡FELICIDADES! Ahora dominas:")
    print("ğŸ JSON EN PYTHON - EL FORMATO UNIVERSAL")
    print(f"\nğŸ“Š Tu perfil de experto:")
    print(json_perfecto)
    
    return "ğŸš€ Â¡EstÃ¡s listo para integrar sistemas y crear APIs!"

# Â¡EJECUTA TU PODER!
mensaje_final = demostrar_poder_json()
print(f"\n{mensaje_final}")

Â¡JSON ES EL IDIOMA UNIVERSAL DE LOS DATOS, Y AHORA LO HABLAS CON FLUIDEZ! ğŸŒğŸ